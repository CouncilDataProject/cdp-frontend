import { action } from "@storybook/addon-actions";
import { Meta, Props, Story } from "@storybook/addon-docs/blocks";
import { boolean } from "@storybook/addon-knobs";

import FilterPopup from "./FilterPopup";
import SelectDateRange from "../SelectDateRange/SelectDateRange";
import SelectSorting from "../SelectSorting/SelectSorting";
import SelectTextFilterOptions from "../SelectTextFilterOptions/SelectTextFilterOptions";

<Meta title="Filters|FilterPopup" component={FilterPopup} />

# Filter Popup

### A general container of filter components such as SelectDateRange, SelectTextFilterOptions, and SelectSorting.

### Display additional clear and save buttons to clear and save the filter state.

<Props of={FilterPopup} />

## FilterPopup examples. Switch to Canvas mode and use Knobs setting to open the popup.

### Select Date Range

<Story name="Select Date Range">
  <FilterPopup
    clear={action("clear-filter")}
    getTextRep={() => "Date"}
    isActive={action("check-is-active")}
    header={"Select Date Range"}
    popupIsOpen={boolean("Popup is Open", false)}
    setPopupIsOpen={action("set-popup-is-open")}
    handlePopupClose={action("handle-popup-close")}
    closeOnChange={false}
  >
    <SelectDateRange
      state={{
        start: "",
        end: "",
      }}
      update={action("update-date-range-state")}
    />
  </FilterPopup>
</Story>

### Select Committees

<Story name="Select Committees">
  <FilterPopup
    clear={action("clear-filter")}
    getTextRep={() => "Committee"}
    isActive={action("check-is-active")}
    header={"Select Committees"}
    popupIsOpen={boolean("Popup is Open", false)}
    setPopupIsOpen={action("set-popup-is-open")}
    handlePopupClose={action("handle-popup-close")}
    closeOnChange={false}
  >
    <SelectTextFilterOptions
      name={"Committee"}
      state={{}}
      update={action("update-filter-options-state")}
      options={[
        {
          name: "city-council",
          label: "City Council",
          disabled: false,
        },
        {
          name: "council-briefing",
          label: "Council Briefing",
          disabled: false,
        },
        {
          name: "finance-housing",
          label: "Finance and Housing Committee",
          disabled: false,
        },
        {
          name: "finance-neighborhood",
          label: "Finance and Neighborhoods Committee",
          disabled: false,
        },
        {
          name: "select-budget",
          label: "Select Budget Committee",
          disabled: false,
        },
        {
          name: "transportation-utilities",
          label: "Transportation and Utilities Committee",
          disabled: false,
        },
      ]}
      optionQuery={""}
      setOptionQuery={action("set-option-query")}
    />
  </FilterPopup>
</Story>

### Select Sorting

<Story name="Select Sorting">
  <FilterPopup
    clear={action("clear-filter")}
    getTextRep={() => "Most relevant"}
    isActive={() => true}
    header={"Sort Results By"}
    popupIsOpen={boolean("Popup is Open", false)}
    setPopupIsOpen={action("set-popup-is-open")}
    handlePopupClose={action("handle-popup-close")}
    closeOnChange={true}
  >
    <SelectSorting
      state={{
        by: "value",
        order: "desc",
        label: "Most relevant",
      }}
      update={action("update-sorting-state")}
      sortOptions={[
        { by: "value", order: "desc", label: "Most relevant" },
        { by: "date", order: "desc", label: "Newest first" },
        { by: "date", order: "asc", label: "Oldest first" },
      ]}
      onPopupClose={action("on-popup-close")}
    />
  </FilterPopup>
</Story>
